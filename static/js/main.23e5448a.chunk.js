(this.webpackJsonpfont=this.webpackJsonpfont||[]).push([[0],{21:function(e){e.exports=JSON.parse('{"a":"https://myforum146.herokuapp.com"}')},223:function(e,t,n){},226:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(0),r=n.n(a),s=n(23),o=n.n(s),i=(n(99),n(2)),l=n(6),j=n(12),b=n.n(j),u=n(3),d=n(13),m=n.n(d),h=n(20);function O(e){var t=e.links,n=m.a.chunk(t,2),a=Object(l.a)(n,2),r=a[0],s=a[1];return Object(c.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light shadow-sm d-flex justify-content-between",children:[Object(c.jsx)(x,{links:r}),Object(c.jsx)(x,{links:s})]})}function x(e){var t=e.links;return Object(c.jsx)("div",{className:"d-inline-flex p-2",children:t.map((function(e){return Object(c.jsx)(h.b,{className:"nav-link",to:"/"+e,children:m.a.upperFirst(e||"about")},e)}))})}function f(){var e=Object(a.useContext)(I).name;return Object(c.jsxs)("section",{className:"container",children:[Object(c.jsxs)("h1",{children:["Hello ",e]}),Object(c.jsx)("div",{children:"welcom to my forum. in this side, after you sing up you can talk to other users"})]})}var p=n(14),v=function(e){return{type:"GET FORUM",info:"get forum",payload:e}},g=n(21);function y(e){var t=e.history,n=Object(a.useState)(""),r=Object(l.a)(n,2),s=r[0],o=r[1],i=Object(a.useState)(""),j=Object(l.a)(i,2),u=j[0],d=j[1],m=Object(a.useContext)(I),h=m.forum,O=m.name,x=m.dispatch;return Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("h1",{className:"text-center",children:"Forum"}),Object(c.jsxs)("table",{className:"container",style:{border:"1px solid black"},children:[Object(c.jsx)("thead",{style:{border:"1px solid black"},children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{style:{width:"10%"},children:"User"}),Object(c.jsx)("th",{style:{width:"70%"},children:"Title"}),Object(c.jsx)("th",{children:"Date"})]})}),Object(c.jsx)("tbody",{children:(null===h||void 0===h?void 0:h.length)?h.map((function(e,n){var a=e.user,r=e.title,s=e.date,o=e._id;return Object(c.jsxs)("tr",{className:"bg-".concat(n%2?"primary":"secondary"," text-white"),onClick:function(){return t.push("/Forum/".concat(n))},children:[Object(c.jsx)("td",{children:a}),Object(c.jsx)("td",{children:r}),Object(c.jsx)("td",{children:s})]},o)})):Object(c.jsx)("h4",{children:"No Post In The Forum"})})]}),O&&Object(c.jsxs)("form",{action:"",children:[Object(c.jsx)("h3",{children:"Add Discussion:"}),Object(c.jsx)("label",{htmlFor:"titel",children:"Titel:"}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{className:"form-control",type:"text",name:"titel",id:"titel",value:s,onChange:function(e){var t=e.target.value;return o(t)}}),Object(c.jsx)("br",{}),Object(c.jsx)("label",{htmlFor:"body",children:"body:"}),Object(c.jsx)("br",{}),Object(c.jsx)("textarea",{className:"form-control",name:"body",id:"body",cols:"30",rows:"10",value:u,onChange:function(e){var t=e.target.value;return d(t)}}),Object(c.jsx)("button",{className:"btn btn-primary mt-2",type:"button",onClick:function(){if(!s||!u)return p.b.warn("you can't send empty title or body");b.a.defaults.headers.common["x-auth-token"]=localStorage.getItem("token"),x({type:"SEND REQUEST",info:"set loading to true"}),b.a.post("".concat(g.a,"/forum/discussion"),{title:s,body:u}).then((function(e){var t=e.data;x(v(t)),o(""),d("")})).catch((function(e){var t=e.data;console.log(t),p.b.warn(t)}))},children:"Submit"})]})]})}function N(e){var t,n=e.location.pathname,r=Object(a.useState)(),s=Object(l.a)(r,2),o=s[0],i=s[1],j=null!==(t=Object(a.useContext)(I))&&void 0!==t?t:{},d=j.forum,m=j.dispatch;if(!d)return Object(c.jsx)(u.a,{to:"/Forum"});var h=d[n.split("/").pop()];if(!h)return Object(c.jsx)(u.a,{to:"/Forum"});var O=h.title,x=(h.user,h.date,h.body),f=h.comments,y=h._id;return Object(c.jsxs)("section",{className:"container",children:[" ",Object(c.jsx)("header",{children:Object(c.jsx)("h1",{children:O})}),Object(c.jsx)("main",{children:Object(c.jsx)("div",{children:x})}),Object(c.jsxs)("footer",{children:[Object(c.jsxs)("form",{action:"",className:"m-2",children:[Object(c.jsx)("label",{htmlFor:"comment",children:Object(c.jsx)("h3",{className:"mb-1",children:"add comment:"})}),Object(c.jsx)("textarea",{className:"form-control mb-3",name:"comment",value:o,onChange:function(e){var t=e.target.value;return i(t)}}),Object(c.jsx)("button",{className:"btn btn-primary",type:"button",onClick:function(){b.a.defaults.headers.common["x-auth-token"]=localStorage.getItem("token"),b.a.post("".concat(g.a,"/forum/comment"),{body:o,id:y}).then((function(e){var t=e.data;m(v(t)),i("")})).catch((function(e){var t=e.data;return p.b.warn(null!==t&&void 0!==t?t:"unexpected error")}))},children:"submit"})]}),Object(c.jsx)("ul",{children:f.map((function(e){var t=e.user,n=e.date,a=e.body,r=e._id;return Object(c.jsxs)("li",{children:[Object(c.jsx)("h5",{children:t})," ",Object(c.jsx)("div",{children:a}),Object(c.jsx)("div",{className:"text-right",children:n})]},r)}))})]})]})}function k(e){var t=e.history,n=e.location.pathname;return Object(c.jsxs)(c.Fragment,{children:["/Forum"===n&&Object(c.jsx)(y,{history:t}),Object(c.jsx)(u.d,{children:Object(c.jsx)(u.b,{exact:"*",component:N})})]})}var S=n(34),F=n(35);function w(e){var t=e.location.pathname,n=e.history,r=Object(a.useContext)(I).dispatch,s=Object(a.useMemo)((function(){var e=t.slice(-2),a="up"===e;return[{initialValues:Object(i.a)(Object(i.a)({},a&&{name:""}),{},{email:"",password:""}),validationSchema:F.a(Object(i.a)(Object(i.a)({},a&&{name:F.b().required("required").label("Name")}),{},{email:F.b().required("required").label("Email"),password:F.b().required("required").label("Password")})),onSubmit:function(t){r({type:"SEND REQUEST",info:"set loading to true"}),b.a.post("".concat(g.a,"/sign/").concat(e),t).then((function(e){var t=e.data,c=t.name,s=t.token,o=t.massage;if(Object(p.b)(o),a)return n.push("/signin");console.log(s),localStorage.setItem("token",s),localStorage.setItem("name",c),r(function(e){return{type:"SIGN UP",info:"set the user name",payload:e}}(c)),n.push("/Forum")})).catch((function(e){var t,n=e.response;p.b.warning(null!==(t=null===n||void 0===n?void 0:n.data)&&void 0!==t?t:"Unexpected error"),r({type:"ERROR",info:"set loading to false"})}))}},function(){return Object(c.jsxs)("h3",{children:["Sign-",e]})}]}),[]),o=Object(l.a)(s,2),j=o[0],u=o[1];return Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)(u,{}),Object(c.jsx)(S.d,Object(i.a)(Object(i.a)({},j),{},{children:Object(c.jsxs)(S.c,{children:[m.a.keys(j.initialValues).map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsxs)("label",{htmlFor:e,children:[m.a.upperFirst(e),":"]}),Object(c.jsx)("br",{}),Object(c.jsx)(S.b,{name:e,id:e}),Object(c.jsx)("br",{}),Object(c.jsx)(S.a,{name:e,className:"text-danger",children:function(e){return Object(c.jsx)("div",{className:"text-danger",children:e})}})]},e)})),Object(c.jsx)("br",{}),Object(c.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})}))]})}function E(){return(0,Object(a.useContext)(I).dispatch)({type:"LOG OUT",info:"set 'name' to null"}),localStorage.removeItem("name"),localStorage.removeItem("token"),Object(c.jsx)(u.a,{})}n(219),n(220),n(88),n(221),n(223),n(224);var C={loading:!0,name:localStorage.getItem("name"),forum:null},R=function(e,t){var n=t.type,c=t.payload;switch(n){case"SEND REQUEST":return Object(i.a)(Object(i.a)({},e),{},{loading:!0});case"GET FORUM":return Object(i.a)(Object(i.a)({},e),{},{loading:!1,forum:c});case"SIGN UP":return Object(i.a)(Object(i.a)({},e),{},{loading:!1,name:c});case"LOG OUT":return Object(i.a)(Object(i.a)({},e),{},{name:null});case"ERROR":return Object(i.a)(Object(i.a)({},e),{},{loading:!1});default:throw new Error("type ".concat(n," invalide"))}},I=(n(225),r.a.createContext({}));var T=function(){var e=Object(a.useReducer)(R,C),t=Object(l.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){b.a.get(g.a).then((function(e){var t=e.data;return r(v(t))})).catch((function(){return r({type:"ERROR",info:"set loading to false"})}))}),[]);var s=Object(i.a)({"":f,Forum:k},n.name?{Logout:E}:{signin:w,signup:w});return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(p.a,{}),Object(c.jsx)("header",{className:"App-header",children:Object(c.jsx)(O,{links:m.a.keys(s)})}),Object(c.jsx)("main",{children:Object(c.jsx)(I.Provider,{value:Object(i.a)(Object(i.a)({},n),{},{dispatch:r}),children:Object(c.jsx)(u.d,{children:m.a.map(s,(function(e,t){return Object(c.jsx)(u.b,{path:"/"+t,exact:!t,component:e},t)}))})})})]})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,230)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};o.a.render(Object(c.jsx)(h.a,{children:Object(c.jsx)(T,{})}),document.getElementById("root")),U()},99:function(e,t,n){}},[[226,1,2]]]);
//# sourceMappingURL=main.23e5448a.chunk.js.map